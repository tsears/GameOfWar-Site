var War=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r(1),a=n(i),u=r(2),o=n(u),s=r(7),f=n(s),c=r(5),l=n(c);e.exports={War:a.default,Game:o.default,EndlessGame:f.default,Deck:l.default,CardAwardMethod:u.CardAwardMethod}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(2),o=n(u),s=r(5),f=n(s),c=function(){function e(t,r,n){i(this,e),this._numSuits=t,this._numRanks=r,this._numPlayers=n,this._warGame=new o.default(new f.default(this._numSuits,this._numRanks),this._numPlayers)}return a(e,[{key:"game",get:function(){return this._warGame}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CardAwardMethod=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(3),o=n(u),s=r(4),f=n(s),c=r(5),l=n(c),d=t.CardAwardMethod={Increasing:0,Shuffled:1},h=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.Increasing;if(i(this,e),this._deck=t,this._numPlayers=r,this._players=[],this._playerCount=0,this._distributionMethod=n,t.currentSize<r)throw new Error("Deck must at least the same size as the number of players");for(var a=1;a<=r;++a)this._players.push(new o.default("Player "+a)),++this._playerCount;this._startGame()}return a(e,[{key:"getPlayer",value:function(e){var t=e-1;return this._players[t]}},{key:"playRound",value:function(){var e=new f.default,t=this._players.map(function(e,t){return t});return this._resolveRound(t,e)}},{key:"_startGame",value:function(){this._distributeCards()}},{key:"_resolveRound",value:function(e,t){var r=this._draw(e,t),n=this._findCardWithMaxValue(r),i=r.filter(function(e){return e&&e.rank===n.rank}).length>1;if(i){t.war=!0;var a=this._getWarringPlayerIndicies(r,e,n);return this._prepForWar(r,a,t),this._resolveRound(a,t)}var u=this._players[e[r.indexOf(n)]];return this._finishRound(u,r,t)}},{key:"_prepForWar",value:function(e,t,r){this._draw(t,r)}},{key:"_finishRound",value:function(e,t,r){return e?(r.winner=e,this._awardCards(r.draws,e)):r.winner=null,this._gameIsOver()&&(r.gameOver=!0),r}},{key:"_draw",value:function(e,t){for(var r=this,n=e.map(function(e){return r._players[e].revealCard()}),i=0;i<e.length;++i){var a=e[i];t.draws[a]||(t.draws[a]=[]),t.draws[a].push(n[i])}return n}},{key:"_gameIsOver",value:function(){return this._players.filter(function(e){return 0===e.cardCount}).length===this._numPlayers-1}},{key:"_getWarringPlayerIndicies",value:function(e,t,r){for(var n=[],i=0;i<e.length;i++)e[i]&&e[i].rank===r.rank&&n.push(t[i]);return n}},{key:"_findCardWithMaxValue",value:function(e){return e.filter(function(e){return e}).reduce(function(e,t){return t.rank>e.rank?t:e},{rank:0})}},{key:"_awardCards",value:function(e,t){this._distributionMethod===d.Increasing?this._awardCardsIncreasing(e,t):this._distributionMethod===d.Shuffled&&this._awardCardsShuffled(e,t)}},{key:"_awardCardsIncreasing",value:function(e,t){this._getDrawsThen(e,function(e){t.awardCard(e)})}},{key:"_awardCardsShuffled",value:function(e,t){var r=new l.default(0,0);for(this._getDrawsThen(e,function(e){r.add(e)}),r.shuffle();r.currentSize>0;)t.awardCard(r.deal())}},{key:"_getDrawsThen",value:function(e,t){for(var r=[],n=0;n<e.length;++n)for(var i=0;i<e[n].length;++i)e[n][i]&&t(e[n][i]);return r}},{key:"_distributeCards",value:function(){this._deck.shuffle();for(var e=Math.floor(this._deck.currentSize/this._numPlayers);e>0;){for(var t=0;t<this._numPlayers;++t)this._players[t].addCard(this._deck.deal());--e}}},{key:"deck",get:function(){return this._deck}},{key:"playerCount",get:function(){return this._playerCount}}]),e}();t.default=h},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t){r(this,e),this._name=t,this._cards=[]}return n(e,[{key:"addCard",value:function(e){this._cards.push(e)}},{key:"awardCard",value:function(e){this._cards.unshift(e)}},{key:"revealCard",value:function(){return this._cards.pop()}},{key:"cardCount",get:function(){return this._cards.length}},{key:"score",get:function(){return this._cards.length}},{key:"name",get:function(){return this._name}}]),e}();t.default=i},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){r(this,e),this._draws=[],this._war=!1,this._winner=null,this._gameOver=!1}return n(e,[{key:"draws",get:function(){return this._draws}},{key:"war",get:function(){return this._war},set:function(e){this._war=e}},{key:"winner",get:function(){return this._winner},set:function(e){this._winner=e}},{key:"gameOver",get:function(){return this._gameOver},set:function(e){this._gameOver=e}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),o=n(u),s=function(){function e(t,r){i(this,e),this._numSuits=t,this._numRanks=r,this._cards=[],this._initialSize=0;for(var n=1;n<=t;++n)for(var a=1;a<=r;++a)++this._initialSize,this._cards.push(new o.default(n,a))}return a(e,[{key:"deal",value:function(){return this._cards.pop()}},{key:"add",value:function(e){return this._cards.push(e)}},{key:"shuffle",value:function(){var e=[],t=this._cards.slice();do{var r=Math.floor(Math.random()*t.length),n=t.splice(r,1)[0];e.push(n)}while(t.length>0);this._cards=e}},{key:"numSuits",get:function(){return this._numSuits}},{key:"numRanks",get:function(){return this._numRanks}},{key:"currentSize",get:function(){return this._cards.length}},{key:"initialSize",get:function(){return this._initialSize}}]),e}();t.default=s},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e),this._suit=t,this._rank=n}return n(e,[{key:"suit",get:function(){return this._suit}},{key:"rank",get:function(){return this._rank}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(n)},f=r(3),c=(n(f),r(4)),l=(n(c),r(5)),d=n(l),h=r(2),_=n(h),y=function(e){function t(e,r){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return u(t,e),o(t,[{key:"_startGame",value:function(){this._discardPile=new d.default(0,0),this._distributeCards()}},{key:"_prepForWar",value:function(e){this._discardDraw(e),this._playersNeedCards()&&this._distributeCards()}},{key:"_finishRound",value:function(e,t,r){return r.winner=e,this._discardDraw(t),this._playersNeedCards()&&this._distributeCards(),r}},{key:"_discardDraw",value:function(e){for(var t=0;t<e.length;++t)this._discardPile.add(e[t]);e=null}},{key:"_playersNeedCards",value:function(){return this._players.filter(function(e){return 0===e.cardCount}).length>0}},{key:"_distributeCards",value:function(){for(var e=this._discardPile.currentSize,r=0;r<e;++r){var n=this._discardPile.deal();this._deck.add(n)}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_distributeCards",this).call(this)}},{key:"discardPile",get:function(){return this._discardPile}}]),t}(_.default);t.default=y}]);
//# sourceMappingURL=game-of-war.min.js.map